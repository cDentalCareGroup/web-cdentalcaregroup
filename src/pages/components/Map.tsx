import {
    GoogleMap,
    Marker,
    useLoadScript,
} from "@react-google-maps/api";
import { useMemo } from "react";
import CustomMarker from "../../data/maps/custom.marker";


interface MapProps {
    initCoord: MapPropsCoord;
    markers?: CustomMarker[];
    onClick: (event: CustomMarker) => void
}

interface MapPropsCoord {
    lat: number;
    lng: number;
}

const Map = ({ initCoord, markers, onClick }: MapProps) => {
    const coordinates = useMemo(() => initCoord, []);
    const { isLoaded } = useLoadScript({
        googleMapsApiKey: "AIzaSyDB5WyzdGWnx3JspWuwTmdKN0TURq8QIBA",
    });


    return (
        <>
            {isLoaded ? (
                <GoogleMap
                    zoom={14}
                    center={coordinates}
                    mapContainerClassName="w-full h-full"
                >
                    {markers?.map((value, index) => (
                        <Marker
                            key={index}
                            position={{
                                lat: value.lat,
                                lng: value.lng,
                            }}
                            label={""}
                            onClick={(_) => onClick(value)}
                            icon={value.type == "office" ?
                                {
                                    path:
                                        "M480 320a96 96 0 1 0-96-96 96 96 0 0 0 96 96zm48 32a22.88 22.88 0 0 0-7.06 1.09 124.76 124.76 0 0 1-81.89 0A22.82 22.82 0 0 0 432 352a112 112 0 0 0-112 112.62c.14 26.26 21.73 47.38 48 47.38h224c26.27 0 47.86-21.12 48-47.38A112 112 0 0 0 528 352zm-198.09 10.45A145.19 145.19 0 0 1 352 344.62V128a32 32 0 0 0-32-32h-32V32a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v64H32a32 32 0 0 0-32 32v368a16 16 0 0 0 16 16h288.31A78.62 78.62 0 0 1 288 464.79a143.06 143.06 0 0 1 41.91-102.34zM144 404a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12H92a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm48-122a6 6 0 0 1-6 6h-20a6 6 0 0 1-6-6v-26h-26a6 6 0 0 1-6-6v-20a6 6 0 0 1 6-6h26V70a6 6 0 0 1 6-6h20a6 6 0 0 1 6 6v26h26a6 6 0 0 1 6 6v20a6 6 0 0 1-6 6h-26zm80 250a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12zm0-128a12 12 0 0 1-12 12h-40a12 12 0 0 1-12-12v-40a12 12 0 0 1 12-12h40a12 12 0 0 1 12 12z",
                                    fillColor: "#1e40af",
                                    fillOpacity: 0,
                                    scale: 0.06,
                                    strokeColor: "#1e40af",
                                    strokeWeight: 2,
                                } : {
                                    path:
                                        "M31.36,31h-0.72c0-6.432-4.777-12.232-11.359-13.792c-0.15-0.036-0.261-0.163-0.275-0.317 c-0.015-0.153,0.071-0.299,0.212-0.362c2.861-1.273,4.71-4.116,4.71-7.241c0-4.371-3.556-7.927-7.927-7.927 c-4.372,0-7.928,3.556-7.928,7.927c0,3.125,1.849,5.968,4.711,7.241c0.141,0.063,0.226,0.209,0.212,0.362 c-0.014,0.154-0.125,0.281-0.275,0.317C6.137,18.768,1.36,24.568,1.36,31H0.64c0-6.46,4.574-12.312,11.002-14.248 c-2.634-1.539-4.291-4.375-4.291-7.465c0-4.768,3.879-8.647,8.648-8.647c4.768,0,8.647,3.879,8.647,8.647 c0,3.09-1.656,5.926-4.29,7.465C26.786,18.688,31.36,24.54,31.36,31z M16,30.36c-0.096,0-0.187-0.038-0.255-0.105l-3.962-3.965 c-0.511-0.512-0.794-1.191-0.797-1.915c-0.003-0.731,0.28-1.42,0.798-1.938c0.513-0.513,1.195-0.796,1.921-0.798 c0.001,0,0.003,0,0.004,0c0.729,0,1.413,0.283,1.927,0.798L16,22.803l0.365-0.365c1.026-1.027,2.825-1.028,3.852,0.001 c0.527,0.526,0.811,1.228,0.798,1.974c-0.014,0.711-0.297,1.377-0.799,1.878l-3.961,3.965C16.187,30.322,16.096,30.36,16,30.36z M13.709,22.36c-0.001,0-0.002,0-0.003,0c-0.534,0.001-1.036,0.209-1.413,0.587c-0.381,0.381-0.59,0.887-0.587,1.425 c0.002,0.532,0.211,1.032,0.587,1.408L16,29.49l3.707-3.71c0.369-0.368,0.578-0.858,0.587-1.381c0.01-0.549-0.198-1.064-0.587-1.452 c-0.756-0.758-2.077-0.757-2.833-0.001l-0.62,0.62c-0.141,0.141-0.368,0.141-0.509,0l-0.619-0.619 C14.748,22.568,14.245,22.36,13.709,22.36z",
                                    fillColor: "#1e40af",
                                    fillOpacity: 0,
                                    scale: 1,
                                    strokeColor: "#1e40af",
                                    strokeWeight: 2,
                                }}
                        />
                    ))}
                </GoogleMap>
            ) : (
                <div className="text">
                </div>
            )}
        </>
    );
};

export default Map;